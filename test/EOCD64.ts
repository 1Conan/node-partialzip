import ava from 'ava';
import EOCD64 from '../src/lib/headers/EOCD64';

// prettier-ignore
const data = Buffer.from([
  0x50, 0x4b, 0x06, 0x06, 0x2c, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x2d, 0x00, 0x2d, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x4e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x4a, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
]);

ava('Zip64 End of central directory', async (test) => {
  const eocd = new EOCD64(data);

  test.is(eocd.cdTotal, BigInt(1));
  test.is(eocd.cdEntries, BigInt(1));
  test.is(eocd.cdOffset, BigInt(74));
  test.is(eocd.cdSize, BigInt(78));
  test.is(eocd.cdStart, 0);
  test.is(eocd.diskNo, 0);
  test.is(eocd.version, 0x2d);
  test.is(eocd.versionToExtract, 0x2d);
});
